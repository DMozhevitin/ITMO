# A. Сумма простая

Вам нужно научиться отвечать на запрос «сумма чисел на отрезке».

Массив не меняется. Запросов много. Отвечать на каждый запрос следует за .

**Входные данные**

Размер массива — n и числа x, y, a0, порождающие массив a: 

Далее следует количество запросов m и числа z, t, b0, порождающие массив b: .

Массив c строится следующим образом: .

Запросы: i-й из них — найти сумму на отрезке от min(c2i, c2i + 1) до max(c2i, c2i + 1) в массиве a.

Ограничения: 1 ≤ n ≤ 107, 0 ≤ m ≤ 107. Все числа целые от 0 до 216. t может быть равно  - 1.

**Выходные данные**

Выведите сумму всех сумм.

# B. RSQ

**Входные данные**

В первой строке находится число n — размер массива. (1 ≤ n ≤ 500 000) Во второй строке находится n чисел ai — элементы массива. Далее содержится описание операций, их количество не превышает 1 000 000. В каждой строке находится одна из следующих операций:

set i x — установить a[i] в x.
sum i j — вывести значение суммы элементов в массиве на отрезке с i по j, гарантируется, что (1 ≤ i ≤ j ≤ n).


Все числа во входном файле и результаты выполнения всех операций не превышают по модулю 1018.


**Выходные данные**

Выведите последовательно результат выполнения всех операций sum. Следуйте формату выходного файла из примера.

# C. RMQ2

**Входные данные**

В первой строке находится число n — размер массива. (1 ≤ n ≤ 105) Во второй строке находится n чисел ai — элементы массива. Далее содержится описание операций, их количество не превышает 2·105. В каждой строке находится одна из следующих операций:

set i j x — установить все a[k], i ≤ k ≤ j в x.


add i j x — увеличить все a[k], i ≤ k ≤ j на x.


min i j — вывести значение минимального элемента в массиве на отрезке с i по j, гарантируется, что (1 ≤ i ≤ j ≤ n).


Все числа во входном файле и результаты выполнения всех операций не превышают по модулю 1018.


**Выходные данные**

Выведите последовательно результат выполнения всех операций min. Следуйте формату выходного файла из примера.

# D. Художник

тальянский художник-абстракционист Ф. Мандарино увлекся рисованием одномерных черно-белых картин. Он пытается найти оптимальное местоположение и количество черных участков картины. Для этого он проводит на прямой белые и черные отрезки, и после каждой из таких операций хочет знать количество черных отрезков на получившейся картине и их суммарную длину.

Изначально прямая — белая. Ваша задача — написать программу, которая после каждой из таких операций выводит в выходной файл интересующие художника данные.

**Входные данные**

В первой строке входного файла содержится общее количество нарисованных отрезков (1 ≤ n ≤ 100 000). В последующих n строках содержится описание операций. Каждая операция описывается строкой вида c x l, где c — цвет отрезка (W для белых отрезков, B для черных), а сам отрезок имеет вид [x;x + l), причем координаты обоих концов — целые числа, не превосходящие по модулю 500 000. Длина задается положительным целым числом.

**Выходные данные**

После выполнения каждой из операций необходимо вывести в выходной файл на отдельной строке количество черных отрезков на картине и их суммарную длину, разделенные одним пробелом.

# E. Криптография

Задано n матриц A1, A2, ..., An размера 2 × 2. Необходимо для нескольких запросов вычислить произведение матриц Ai, Ai + 1, ..., Aj. Все вычисления производятся по модулю r.

**Входные данные**

Первая строка входного файла содержит числа r (1 ≤ r ≤ 10 000), n (1 ≤ n ≤ 200 000) и m (1 ≤ m ≤ 200 000). Следующие n блоков по две строки содержащие по два числа в строке — описания матриц. Затем следуют m пар целых чисел от 1 до n, запросы на произведение на отрезке.

**Выходные данные**

Выведите m блоков по две строки,по два числа в каждой — произведения на отрезках. Разделяйте блоки пустой строкой. Все вычисления производятся по модулю r

# F. Разреженные таблицы

Дан массив из n чисел. Требуется написать программу, которая будет отвечать на запросы следующего вида: найти минимум на отрезке между u и v включительно.

**Входные данные**

В первой строке входного файла даны три натуральных числа n, m (1 ≤ n ≤ 105, 1 ≤ m ≤ 107) и a1 (0 ≤ a1 < 16 714 589) — количество элементов в массиве, количество запросов и первый элемент массива соответственно. Вторая строка содержит два натуральных числа u1 и v1 (1 ≤ u1, v1 ≤ n) — первый запрос.

Элементы a2, a3, ..., an задаются следующей формулой:


Например, при n = 10, a1 = 12345 получается следующий массив: a = (12345, 305498, 7048017, 11694653, 1565158, 2591019, 9471233, 570265, 13137658, 1325095).

Запросы генерируются следующим образом:

,  ,
где ansi — ответ на запрос номер i.
Обратите внимание, что ui может быть больше, чем vi.

**Выходные данные**

В выходной файл выведите um, vm и ansm (последний запрос и ответ на него).

# G. Окна

На экране расположены прямоугольные окна, каким-то образом перекрывающиеся (со сторонами, параллельными осям координат). Вам необходимо найти точку, которая покрыта наибольшим числом из них.

**Входные данные**

В первой строке входного файла записано число окон n (1 ≤ n ≤ 50000). Следующие n строк содержат координаты окон x(1, i) y(1, i) x(2, i) y(2, i), где (x(1, i), y(1, i)) — координаты левого верхнего угла i-го окна, а (x(2, i), y(2, i)) — правого нижнего (на экране компьютера y растет сверху вниз, а x — слева направо). Все координаты — целые числа, по модулю не превосходящие 2·105.

**Выходные данные**

В первой строке выходного файла выведите максимальное число окон, покрывающих какую-либо из точек в данной конфигурации. Во второй строке выведите два целых числа, разделенные пробелом — координаты точки, покрытой максимальным числом окон. Окна считаются замкнутыми, т.е. покрывающими свои граничные точки.

# H. RMQ наоборот

Рассмотрим массив a[1..n]. Пусть Q(i, j) — ответ на запрос о нахождении минимума среди чисел a[i], ..., a[j]. Вам даны несколько запросов и ответы на них. Восстановите исходный массив.

**Входные данные**

Первая строка входного файла содержит число n — размер массива, и m — число запросов (1 ≤ n, m ≤ 100 000). Следующие m строк содержат по три целых числа i, j и q, означающих, что Q(i, j) = q (1 ≤ i ≤ j ≤ n,  - 231 ≤ q ≤ 231 - 1).

**Выходные данные**

Если искомого массива не существует, выведите строку «inconsistent».

В противном случае в первую строку выходного файла выведите «consistent». Во вторую строку выходного файла выведите элементы массива. Элементами массива должны быть целые числа в интервале от  - 231 до 231 - 1 включительно. Если решений несколько, выведите любое.

# I. Горы

В парке развлечений «Ай-ой-ай» открылся новейший аттракцион: польские горки. Трек состоит из n рельс, присоединенных одна к концу другой. Начало первой рельсы находится на высоте 0. Оператор Петя может конфигурировать аттракцион, изменяя по своему желанию подъём нескольких последовательных рельс. При этом подъём всех остальных рельс не изменяется. При каждом изменении конфигурации рельс положение следующих за изменяемыми подбирается таким образом, чтобы весь трек оставался связным.

Каждый запуск вагонетки осуществляется с энергией, достаточной для достижения высоты h. Это значит, что вагонетка будет двигаться до тех пор, пока высота не превысит h, либо пока не закончится трек.

По записям о всех изменениях конфигурации рельс и временах запусков вагонетки для каждого запуска определите, сколько рельс вагонетка проедет до остановки.

Трек можно представить как последовательность n подъемов di, по одному на рельс. Изначально рельсы горизонтальны, то есть di = 0 для всех i.

Каждое изменение конфигурации определяется числами a, b и D: все рельсы с a-й по b-ю включительно после этого действия имеют подъем, равный D.

Каждый запуск вагонетки определяется единственным целым числом h — максимальной высотой, на которую способна подняться вагонетка.

**Входные данные**

В первой строке записано целое число n (1 ≤ n ≤ 109) — число рельс. Следующие строки содержат запросы трех видов:

 a b D — изменение конфигурации. Рельсы с a-й по b-ю включительно после выполнения запроса имеют подъем, равный D.
 h — запуск вагонетки. Требуется найти число рельс, которое проедет вагонетка, которая способна подняться на высоту h.
 — конец ввода. Этот запрос встретится ровно один раз в конце файла.
В любой момент времени высота любой точки трека лежит в промежутке от 0 до 109. Во вводе не более 100 000 строк.

**Выходные данные**

Для каждого запроса  выведите единственное целое число — количество рельс, которое проедет вагонетка.

# J. Великая Китайская Стена

В этой задаче мы проследим альтернативную историю Великой Китайской Стены.

Великая Китайская Стена состоит из n метровых участков, пронумерованных по порядку целыми числами от 1 до n. Каждый участок характеризуется своей высотой в метрах — целым неотрицательным числом. До начала нашей истории Стена ещё не построена, поэтому высота каждого участка равна нулю.

Происходят события двух видов.

Укрепление Стены (запись: «defend a b c»). Император вызывает к себе вассалов из приграничных провинций и велит им сделать так, чтобы промежуток Стены, охватывающий участки от a до b включительно, имел высоту не менее c метров. Это значит, что все участки меньшей высоты на этом промежутке нужно достроить до высоты c, а остальные оставить нетронутыми. Приказ императора выполняется немедленно, то есть до наступления следующего события.
Нападение варваров (запись: «attack d e»). Варвары подходят к Стене снаружи и занимают позиции напротив промежутка Стены, охватывающего участки от d до e включительно. После этого они находят такой участок на этом промежутке, у которого высота как можно меньше, и пытаются через него проникнуть на территорию Китая. Нападение также происходит немедленно, до наступления следующего события.
Для восстановления достоверной альтернативно-исторической картины не хватает одного: для каждого нападения варваров указать минимальную высоту Стены на соответствующем промежутке, а также какой-нибудь участок из этого промежутка с такой высотой. По заданной последовательности событий найдите эти числа.

**Входные данные**

В первой строке заданы через пробел два целых числа n и m — длина Стены в метрах и количество событий соответственно (1 ≤ n ≤ 106, 0 ≤ m ≤ 105). В следующих m строках описаны события в порядке их следования. Если событие описывает укрепление Стены, оно задано в форме «defend a b c» (1 ≤ a ≤ b ≤ n, 1 ≤ c ≤ 107). Если же событие описывает нападение варваров, оно задано в форме «attack d e» (1 ≤ d ≤ e ≤ n).

**Выходные данные**

В ответ на каждое нападение варваров выведите строку, содержащую два числа, разделённые пробелом. Первое из этих чисел — минимальная высота Стены на соответствующем промежутке. Второе — номер любого метрового участка Стены на этом промежутке, имеющего такую высоту.

# K. Парковка

Hа кольцевой парковке есть n мест пронумерованых от 1 до n. Есть два вида событий прибытие машину на парковку и отъезд машины с парковки. Если машина приезжает на парковку, а её место занято, то она едет далее по кругу и встаёт на первое свободное место.

**Входные данные**

В первой строке входного файла находится два числа n и m — размер парковки и количество запросов(1 ≤ n, m ≤ 100000). В следующих m строках находятся события. Каждая из этих строк имеет следующий вид:

enter x — приехала машина, которая хочет встать на место x. Для каждой такой команды выведите какое место займёт эта машина.
exit x — уехала машина занимавшая место x. Гарантируется, что на этом месте была машина.

**Выходные данные**

# L. Звезды

Вася любит наблюдать за звездами. Но следить за всем небом сразу ему тяжело. Поэтому он
наблюдает только за частью пространства, ограниченной кубом размером n×n×n. Этот куб поделен
на маленькие кубики размером 1 × 1 × 1. Во время его наблюдений могут происходить следующие
события:
1. В каком-то кубике появляются или исчезают несколько звезд.
2. К нему может заглянуть его друг Петя и поинтересоваться, сколько видно звезд в части пространства, состоящей из нескольких кубиков.
**Формат входных данных**

Первая строка входного файла содержит натуральное число 1 ⩽ n ⩽ 128. Координаты кубиков
— целые числа от 0 до n − 1. Далее следуют записи о происходивших событиях по одной в строке.
В начале строки записано число m. Если m равно:
1, то за ним следуют 4 числа — x, y, z (0 ⩽ x, y, z < N) и k (−20000 ⩽ k ⩽ 20000) — координаты
кубика и величина, на которую в нем изменилось количество видимых звезд;
2, то за ним следуют 6 чисел — x1, y1, z1, x2, y2, z2 (0 ⩽ x1 ⩽ x2 < N, 0 ⩽ y1 ⩽ y2 < N,
0 ⩽ z1 ⩽ z2 < N), которые означают, что Петя попросил подсчитать количество звезд в
кубиках (x, y, z) из области: x1 ⩽ x ⩽ x2, y1 ⩽ y ⩽ y2, z1 ⩽ z ⩽ z2;
3, то это означает, что Васе надоело наблюдать за звездами и отвечать на вопросы Пети. Эта
запись встречается во входном файле только один раз и будет последней.
Количество записей во входном файле не больше 100 002.

**Формат выходных данных**

Для каждого Петиного вопроса выведите искомое количество звезд.




Выведите последовательно результаты выполнения всех операций enter.



